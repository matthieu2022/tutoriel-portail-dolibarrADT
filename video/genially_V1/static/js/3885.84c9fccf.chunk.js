"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[3885],{45577:(e,t,n)=>{n.d(t,{q:()=>u});var o=n(45992),i=n(17588),r=n(66264),l=n(60708),d=n(70698),s=n(5441);const u=(0,i.forwardRef)(((e,t)=>{let{getItems:n,item:u,menuType:a,theme:m,shouldCloseWhenClickOutside:c=!1,menuTheme:g,styles:h,slideSize:v,getItemLayout:f}=e;const[C,p]=(0,i.useState)(n()),[T,b]=(0,i.useState)(!1),y=function(e){const t=(0,i.useRef)(null);return(0,i.useEffect)((()=>{e&&("function"===typeof e?e(t.current):e.current=t.current)})),t}(t),x=(0,i.useCallback)((()=>{b((e=>!e))}),[]);(0,i.useEffect)((()=>{const e=null===u||void 0===u?void 0:u.on(r.q.Message,(e=>{e===l.m.Entering&&(p(n()),b(!1))}));return()=>{null===e||void 0===e||e()}}),[n,u]),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,i.useEffect)((()=>{const o=n=>{(null===t||void 0===t?void 0:t.current)&&!t.current.contains(n.target)&&e(n)};return document.addEventListener("mouseup",o,n),document.addEventListener("touchend",o,n),()=>{document.removeEventListener("mouseup",o,n),document.removeEventListener("touchend",o,n)}}),[t,e,n])}((0,i.useCallback)((()=>{c&&T&&b(!1)}),[T,c]),y,!0),(0,i.useEffect)((()=>{p(n())}),[n]);const k=(0,d.CO)(a);return(0,s.T)({theme:m,children:(0,o.jsx)(k,{items:C,onToggleClick:x,opened:T,ref:y,theme:m,menuTheme:g,styles:h,slideSize:v,getItemLayout:f})})}))},15690:(e,t,n)=>{n.d(t,{M:()=>f});var o=n(45992),i=n(17588),r=n(89035),l=n(21646);const d=()=>{},s=(0,i.forwardRef)(((e,t)=>{let{styles:n}=e;const i=d;return(0,o.jsx)(l.W1,{ref:t,style:{width:"100%",height:"100%"},$backgroundColor:n.backgroundColor,$hamburgerIconColor:n.hamburgerIconColor,children:(0,o.jsxs)(l.YT,{"data-nav-element":"hamburger-menu-toggle",$width:r.sf,children:[(0,o.jsx)(l.e3,{}),(0,o.jsx)(l.cl,{onClick:i,role:"button",children:(0,o.jsx)(l.h_,{children:(0,o.jsx)(l.RG,{$color:n.hamburgerIconColor})})})]})})}));var u=n(58424),a=n(73242);const m=Math.random().toString(36).substring(7),c=()=>{},g=(0,i.forwardRef)(((e,t)=>{let{items:n,menuTheme:i,styles:r}=e;const l=`mainMenu-${m}`,d=c,{ref:s,hasHorizontalScroll:g}=(0,u.x)();return(0,o.jsxs)(a.W1,{"aria-labelledby":l,role:"menu",ref:t,$menuTheme:i,style:{width:"100%",height:"100%"},$backgroundColor:r.backgroundColor,children:[g&&(0,o.jsx)(a.hh,{onClick:d,$menuTheme:i,$disabled:!0,children:(0,o.jsx)(a.rZ,{})}),(0,o.jsx)(a.JU,{id:l,children:"Main menu"}),(0,o.jsx)(a.e3,{}),(0,o.jsx)(a.QS,{ref:s,children:n.map((e=>(0,o.jsx)(a.d,{$isLink:e.isLink,$isActive:e.isActive,$isAllowed:e.isAllowed,$backgroundColor:e.backgroundColor,$textColor:e.textColor,children:(0,o.jsx)(a.Dr,{tabIndex:-1,"aria-label":e.altText||void 0,"aria-disabled":!e.altText,children:(0,o.jsx)(a.gi,{children:e.text})})},e.text+e.key)))}),g&&(0,o.jsx)(a.hh,{onClick:d,$menuTheme:i,children:(0,o.jsx)(a.wF,{})})]})}));var h=n(54769);var v=n(5441);const f=e=>{let{getItems:t,menuType:n,theme:i,styles:r,menuTheme:l}=e;const d=t(),u=(e=>{switch(e){case h.L.Horizontal:return g;case h.L.Hamburger:return s;default:return g}})(n);return(0,v.T)({theme:i,children:(0,o.jsx)(u,{items:d,menuTheme:l,styles:r})})}},76390:(e,t,n)=>{n.d(t,{F:()=>i,c:()=>r});var o=n(15938);const i=e=>e===o.N.Dark?{textColor:"rgb(255, 255, 255)",itemBackgroundColor:"rgb(208, 208, 208)"}:{textColor:"rgb(0, 0, 0)",itemBackgroundColor:"rgb(154, 154, 154)"},r=e=>e===o.N.Dark?{menuBackgroundColor:"rgb(0, 0, 0)",hamburgerIconColor:"rgb(255, 255, 255)"}:{menuBackgroundColor:"rgb(255, 255, 255)",hamburgerIconColor:"rgb(0, 0, 0)"}},53885:(e,t,n)=>{n.r(t),n.d(t,{geniallyMenuEditorScript:()=>y});var o=n(45992),i=n(17588),r=n(57277),l=n(55399),d=n(42511),s=n(45577),u=n(15690),a=n(76390);var m,c=n(89035),g=n(54769);!function(e){e[e.MD=380]="MD"}(m||(m={}));const h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o;if(!e||!e.exists)return;const i=e,{menuType:r}=t;if(n){if(r===g.L.Horizontal){const e=(e=>{switch(e){case g.L.Horizontal:return{minWidth:m.MD,maxWidth:void 0};case g.L.Hamburger:return{minWidth:c.N_.width,maxWidth:m.MD};default:return{minWidth:void 0,maxWidth:void 0}}})(r),t=i.parentSlide.size.width-24,n=Math.max(null!==(o=e.minWidth)&&void 0!==o?o:0,t);i.setSize(n,c.cE.height),i.setPosition((i.parentSlide.size.width-n)/2,i.y)}r===g.L.Hamburger&&i.setSize(c.N_.width,c.N_.height)}};var v=n(15938),f=n(70698);var C=n(93918),p=n(49754),T=n(46482);const b=(0,l.V)((0,i.forwardRef)(((e,t)=>{let{editor:n,script:i,getItemLayout:r}=e;var l;const{theme:u,t:a}=n,{item:m}=i,{menuItems:c,menuTheme:g,menuType:h,backgroundColor:v,hamburgerIconColor:f}=i.getConfig(),p=null!==(l=null===m||void 0===m?void 0:m.parentSlide.size)&&void 0!==l?l:{width:0,height:0},{removeSelectedItem:T,setDefaultSelectedItem:b}=(0,d.C)();return i.on("configChange",(e=>{let{config:t,prevConfig:n}=e;!n||t.menuType===n.menuType&&t.menuTheme===n.menuTheme||(T(),requestAnimationFrame(b))})),(0,o.jsx)(s.q,{ref:t,getItems:()=>(0,C.N)(c,n,a,!0),menuType:h,theme:u,menuTheme:g,styles:{backgroundColor:v,hamburgerIconColor:f},slideSize:p,getItemLayout:r})}))),y=e=>{let{script:t,editor:n}=e;const i=t.item;if(!i)return;if(n.justCreated){const e=t.getConfig();if(i.parentSlide.isPopup)t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=[i.parentSlide.id]}));else{const o=e.slidesToDisplay.selectedSlides.filter((e=>n.getNonPopupSlides().some((t=>t.id===e))));0===o.length?t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=n.getNonPopupSlides().map((e=>{let{id:t}=e;return t}))})):t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=o}))}}n.on("slideCreated",(e=>{let{slide:o}=e;const r=o.parentSlide;if(!i.isTransversal||r)return;const l=t.getConfig().slidesToDisplay.selectedSlides,d=n.getNonPopupSlides().map((e=>{let{id:t}=e;return t})).filter((e=>e!==o.id));l.length===d.length&&t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=[...l,o.id]}))})),n.on("slideDeleted",(e=>{let{slide:n}=e;const o=n.parentSlide;if(!i.isTransversal||o)return;const r=t.getConfig().slidesToDisplay.selectedSlides;r.some((e=>e===n.id))&&t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=r.filter((e=>e!==n.id))}))})),t.on("configChange",(e=>{let{config:o,prevConfig:i}=e;var r;const l=t.item;if(!l||!l.exists)return;const d=o.slidesToDisplay.selectedSlides;if(l.includedSlideIds=[...d],l.isTransversal=!0,d.length>0&&!d.includes(l.parentSlide.id)&&n.moveCurrentItemToSlide(d[0]),void 0===t.getConfig().showSlideSelector){const e=l.parentSlide.isPopup||Boolean(l.parentItem);t.mutateConfig((t=>{t.showSlideSelector=!e}))}(e=>{let{item:t,menuType:n,menuTheme:o}=e;if(!t||!t.exists)return;const i=t,r=(0,f.FB)(n);i.thumbnail=o===v.N.Dark?r.dark:r.light})({item:l,menuType:o.menuType,menuTheme:o.menuTheme}),i&&o.menuType!==i.menuType&&h(l,o,!0),i&&o.menuTheme!==i.menuTheme&&((e,t,n)=>{const o=(0,a.c)(e.menuTheme),i=(0,a.F)(e.menuTheme);n.mutateConfig((e=>{e.backgroundColor===t.backgroundColor&&(e.backgroundColor=o.menuBackgroundColor),e.hamburgerIconColor===t.hamburgerIconColor&&(e.hamburgerIconColor=o.hamburgerIconColor),e.menuItems=e.menuItems.map(((e,n)=>{var o,r,l,d;return e.backgroundColor===(null===(r=null===(o=t.menuItems)||void 0===o?void 0:o[n])||void 0===r?void 0:r.backgroundColor)&&(e.backgroundColor=i.itemBackgroundColor),e.textColor===(null===(d=null===(l=t.menuItems)||void 0===l?void 0:l[n])||void 0===d?void 0:d.textColor)&&(e.textColor=i.textColor),e}))}))})(o,i,t),i&&d.length!==i.slidesToDisplay.selectedSlides.length&&(null===(r=n.trackWidgetConfigChange)||void 0===r||r.call(n,"slideSelector",{selectedSlideIds:d,elementName:T.s.scriptId})),l.showOverflow||(l.showOverflow=!0)}));const l=()=>{var e,n,o,i,r,l,d,s;return{width:null!==(n=null===(e=t.item)||void 0===e?void 0:e.width)&&void 0!==n?n:0,height:null!==(i=null===(o=t.item)||void 0===o?void 0:o.height)&&void 0!==i?i:0,left:null!==(l=null===(r=t.item)||void 0===r?void 0:r.x)&&void 0!==l?l:0,top:null!==(s=null===(d=t.item)||void 0===d?void 0:d.y)&&void 0!==s?s:0}};(0,r.x)({getTargetNodeItem:()=>t.item,renderApp:()=>(0,o.jsx)(b,{editor:n,script:t,isSelectableItem:p.M2,selectableItems:p.Xg,getItemLayout:l}),renderThumbnailApp:()=>{const{theme:e,t:i}=n,{menuItems:r,menuTheme:l,menuType:d,backgroundColor:s,hamburgerIconColor:a}=t.getConfig();return(0,o.jsx)(u.M,{getItems:()=>(0,C.N)(r,n,i,!0),menuType:d,theme:e,menuTheme:l,styles:{backgroundColor:s,hamburgerIconColor:a}})},nodePrefix:"menu"})({script:t,editor:n})}},93918:(e,t,n)=>{n.d(t,{N:()=>d,e:()=>u});var o=n(53607),i=n(48237);const r=(e,t,n)=>""===e?t(n?"__new.editor.widget.menu.sidebar.emptyTitlePlaceholder":"__new.view.widget.menu.sidebar.emptyTitlePlaceholder"):e,l=(e,t)=>{var n,i,r,l;const d=e.menuItemAction.action;if(!d)return!1;const s=(0,o.n5)(d.type),u=null===(n=s.getSlideIdsFromSnapshot)||void 0===n?void 0:n.call(s,d),a=null===(i=t.getCurrentSlide())||void 0===i?void 0:i.id;if(u&&u.length>0)return a===u[0];const m=t.getAllSlides(),c=m.findIndex((e=>e.id===a));return"smartLink"in d.target&&"firstPage"===(null===(r=d.target)||void 0===r?void 0:r.smartLink)?0===c:"smartLink"in d.target&&"lastPage"===(null===(l=d.target)||void 0===l?void 0:l.smartLink)&&c===m.length-1},d=(e,t,n,o)=>e.map(((e,d)=>{var s;const u=(null===(s=e.menuItemAction.action)||void 0===s?void 0:s.type)===i.L.GoToSlide;return{text:r(e.menuItemName,n,o),key:d,onClick:()=>{},isLink:u,isActive:l(e,t),isAllowed:u,altText:e.altText,backgroundColor:e.backgroundColor,textColor:e.textColor}})),s={active:!1,allowed:!1},u=(e,t,n)=>e.map(((e,o)=>{var l,d;const u=!!(null===(l=e.menuItemAction)||void 0===l?void 0:l.data)&&(null===(a=e.menuItemAction.data)||void 0===a?void 0:a.type)===i.L.GoToSlide;var a;const{active:m,allowed:c}=u&&(null===(d=e.menuItemAction)||void 0===d?void 0:d.data)?t.getGoToSlideState(e.menuItemAction.data):s;return{text:r(e.menuItemName,t.t,n),key:o,onClick:()=>{var t;return null===(t=e.menuItemAction)||void 0===t?void 0:t.run()},isLink:u,isActive:m,isAllowed:c,altText:e.altText,backgroundColor:e.backgroundColor,textColor:e.textColor}}))},57277:(e,t,n)=>{n.d(t,{x:()=>i});var o=n(70377);function i(e){let{getTargetNodeItem:t,renderApp:n,renderThumbnailApp:i,nodePrefix:r}=e;return e=>{let{script:l,editor:d}=e,s=null,u=[];function a(e){s&&(o.unmountComponentAtNode(s),s=null),e&&"innerHtml"in e&&(e.innerHtml='<div class="card-iframe"><div style="width: 100%; height: 100%; background: #FF0000; color: #FFFFFF;">Deleted</div><script><\/script></div>')}function m(){s&&o.render(n(),s)}function c(){const e=t(l.getConfig());if(!e)return;const n=`${r}-${e.id}`;"innerHtml"in e&&(e.innerHtml=`<div class="card-iframe"><div id="${n}" class="genially-widget-app" style="width: 100%; height: 100%;"></div></div>`),requestAnimationFrame((()=>{s="idOfFreeNode"in e?document.getElementById(e.idOfFreeNode)||null:document.getElementById(n)||null,m()}))}function g(){i&&u.length&&u.forEach((e=>{const t="true"===e.dataset.critical;o.render(i(t),e)}))}function h(){const e=t(l.getConfig());e&&"idOfThumbnailFreeNode"in e&&requestAnimationFrame((()=>{const t=document.getElementsByClassName(e.idOfThumbnailFreeNode);u=Array.from(t).filter((e=>e instanceof HTMLElement)),g()}))}l.on("configChange",(e=>{let{config:n,prevConfig:o}=e;const i=t(n),r=o?t(o):void 0;r&&r!==i&&a(r),i&&(i!==r?(c(),h()):(m(),g()))})),l.on("dispose",(()=>{a(t(l.getConfig()))})),d.on("itemMount",(e=>{let{item:t}=e;t===l.item&&c()})),d.on("slideChange",(()=>{m()})),d.on("itemUnmount",(e=>{let{item:t}=e;t===l.item&&a()})),d.on("itemThumbnailMount",(e=>{let{item:t}=e;t===l.item&&h()}))}}}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/3885.84c9fccf.chunk.js.map